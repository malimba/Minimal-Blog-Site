$(document).ready(function(){
    document.getElementById('postSubmission').addEventListener('submit', function(event){
        event.preventDefault();
    })
});$(document).ready(function(){
    document.getElementById('delForm').addEventListener('submit', function(event){
        event.preventDefault();
    })
});
function submitPost(){
    blogContent = document.getElementById('bPUpload').value;
     //send current working page data to backend server
    $.ajax({
        url: "blogUpload",
        type:"POST",
        headers: {
            "X-CSRFToken": $("input[name=csrfmiddlewaretoken]").val()
        },
        data:{
            'content': blogContent,
        },
        success: function(result){
            response = JSON.parse(result).value;
            if (response=== true){
                window.location.reload();
            }
            else{
                alert('A server side error occurred!');
            }
        },
        error: function(result){
            console.log('505 A server error occurred!');
            alert('505 A server error occurred!');
        }
    });
}
function showEditInp(obj_){
    console.log(obj_);
    document.getElementById('editModal').style.display = 'block'; //todo: make it invisible after ajax
    document.getElementById('submitModalBtn').setAttribute('data-currentquestion', obj_);
}
function editPost(this_){
    var newContent = document.getElementById('modalInput').value;
    var id = this_.getAttribute('data-currentQuestion');
    console.log(id);
    //send current working page data to backend server
    $.ajax({
        url: `/editContent/${id}`,
        type:"POST",
        headers: {
            "X-CSRFToken": $("input[name=csrfmiddlewaretoken]").val()
        },
        data:{
            'content': newContent,
            'id':id,
        },
        success: function(result){
            response = JSON.parse(result).value;
            if (response=== true){
                window.location.reload();
            }
            else{
                alert('A server side error occurred!');
            }
        },
        error: function(result){
            console.log('505 A server error occurred!');
            alert('505 A server error occurred!');
        }
    });
}

function delPost(id_){
    //send current working page data to backend server
    $.ajax({
        url: `/delPost/${id_}`,
        type:"POST",
        headers: {
            "X-CSRFToken": $("input[name=csrfmiddlewaretoken]").val()
        },
        data:{

        },
        success: function(result){
            response = JSON.parse(result).value;
            if (response=== true){
                window.location.reload();
            }
            else{
                alert('A server side error occurred!');
            }
        },
        error: function(result){
            console.log('505 A server error occurred!');
            alert('505 A server error occurred!');
        }
    });
}